!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=Array.prototype.slice,n=Array.prototype.splice,o={topSpacing:0,bottomSpacing:0,stopScrollingEl:".sticky-stop",className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",widthFromWrapper:!0,responsiveWidth:!1,zIndex:"inherit"},i=t(window),r=t(document),s=[],p=i.height(),a=function(){for(var e=i.scrollTop(),n=r.height(),o=n-p,a=e>o?o-e:0,c=0,d=s.length;c<d;c++){var l=s[c],u=l.stickyWrapper.offset().top-l.topSpacing-a;if(l.stickyWrapper.css("height",l.stickyElement.outerHeight()),e<=u)null!==l.currentTop&&(l.stickyElement.css({width:"",position:"",top:"","z-index":""}),l.stickyElement.parent().removeClass(l.className),l.stickyElement.trigger("sticky-end",[l]),l.currentTop=null);else{var h,f=(t(l.stopScrollingEl).length?t(l.stopScrollingEl).offset().top:n)-l.stickyElement.outerHeight()-l.topSpacing-l.bottomSpacing-e-a;if(f<0?f+=l.topSpacing:f=l.topSpacing,l.currentTop!==f)l.getWidthFrom?(padding=l.stickyElement.innerWidth()-l.stickyElement.width(),h=t(l.getWidthFrom).width()-padding||null):l.widthFromWrapper&&(h=l.stickyWrapper.width()),null==h&&(h=l.stickyElement.width()),l.stickyElement.css("width",h).css("position","fixed").css("top",f).css("z-index",l.zIndex),l.stickyElement.parent().addClass(l.className),null===l.currentTop?l.stickyElement.trigger("sticky-start",[l]):l.stickyElement.trigger("sticky-update",[l]),l.currentTop===l.topSpacing&&l.currentTop>f||null===l.currentTop&&f<l.topSpacing?l.stickyElement.trigger("sticky-bottom-reached",[l]):null!==l.currentTop&&f===l.topSpacing&&l.currentTop<f&&l.stickyElement.trigger("sticky-bottom-unreached",[l]),l.currentTop=f;var m=l.stickyWrapper.parent();l.stickyElement.offset().top+l.stickyElement.outerHeight()>=m.offset().top+m.outerHeight()&&l.stickyElement.offset().top<=l.topSpacing?l.stickyElement.css("position","absolute").css("top","").css("bottom",0).css("z-index",""):l.stickyElement.css("position","fixed").css("top",f).css("bottom","").css("z-index",l.zIndex)}}},c=function(){p=i.height();for(var e=0,n=s.length;e<n;e++){var o=s[e],r=null;o.getWidthFrom?o.responsiveWidth&&(r=t(o.getWidthFrom).width()):o.widthFromWrapper&&(r=o.stickyWrapper.width()),null!=r&&o.stickyElement.css("width",r)}},d={init:function(e){return this.each(function(){var n=t.extend({},o,e),i=t(this),r=i.attr("id"),p=r?r+"-"+o.wrapperClassName:o.wrapperClassName,a=t("<div></div>").attr("id",p).addClass(n.wrapperClassName);i.wrapAll(function(){if(0==t(this).parent("#"+p).length)return a});var c=i.parent();n.center&&c.css({width:i.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"===i.css("float")&&i.css({float:"none"}).parent().css({float:"right"}),n.stickyElement=i,n.stickyWrapper=c,n.currentTop=null,s.push(n),d.setWrapperHeight(this),d.setupChangeListeners(this)})},setWrapperHeight:function(e){var n=t(e),o=n.parent();o&&o.css("height",n.outerHeight())},setupChangeListeners:function(t){window.MutationObserver?new window.MutationObserver(function(e){(e[0].addedNodes.length||e[0].removedNodes.length)&&d.setWrapperHeight(t)}).observe(t,{subtree:!0,childList:!0}):window.addEventListener?(t.addEventListener("DOMNodeInserted",function(){d.setWrapperHeight(t)},!1),t.addEventListener("DOMNodeRemoved",function(){d.setWrapperHeight(t)},!1)):window.attachEvent&&(t.attachEvent("onDOMNodeInserted",function(){d.setWrapperHeight(t)}),t.attachEvent("onDOMNodeRemoved",function(){d.setWrapperHeight(t)}))},update:a,unstick:function(e){return this.each(function(){for(var e=t(this),o=-1,i=s.length;i-- >0;)s[i].stickyElement.get(0)===this&&(n.call(s,i,1),o=i);-1!==o&&(e.unwrap(),e.css({width:"",position:"",top:"",float:"","z-index":""}))})}};window.addEventListener?(window.addEventListener("scroll",a,!1),window.addEventListener("resize",c,!1)):window.attachEvent&&(window.attachEvent("onscroll",a),window.attachEvent("onresize",c)),t.fn.sticky=function(n){return d[n]?d[n].apply(this,e.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.sticky"):d.init.apply(this,arguments)},t.fn.unstick=function(n){return d[n]?d[n].apply(this,e.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.sticky"):d.unstick.apply(this,arguments)},t(function(){setTimeout(a,0)})}),function(t,e){window.shopFilter=new function(){var e="is-selected",n="has-picture",o="shop-filter__viewport__option-img",i={viewport:".shop-filter__viewport",uploadInput:".shop-filter__form-field",uploader:".shop-filter__form-file-uploader",filter_option:".shop-filter__option",filter_component:".shop-filter__component",renderPicture:".shop-filter__viewport__picture",renderPrice:'[data-sf-render="price"]',renderComponent:'[data-sf-render="component"]',renderComponentSubtitle:'[data-sf-render="component-subtitle"]',renderComponentIcon:'[data-sf-render="component-icon"]',renderComponentCounter:'[data-sf-render="component-counter"]',renderOptionImg:'[data-sf-render="optionImg"]',groupOptions:'[data-sf-group="options"]',groupComponents:'[data-sf-group="components"]',elemComponent:'[data-sf-elem="component"]',elemOption:'[data-sf-elem="option"]',init:"[data-sf-onload]"},r=this,s=null,p=null,a=null;currentOptionGroup=null,t(function(){t(i.init).each(function(){t(this).trigger("onload")})}),t(i.viewport).sticky();var c=function(e){var n="component"==t(e).data("sf-elem")?i.groupComponents:i.groupOptions,o="component"==t(e).data("sf-elem")?i.elemComponent:i.elemOption;return t(e).closest(n).find(o)},d=function(e,n,i,r){return i=i||1,t("<img/>",{src:e,"data-sf-component-id":n,class:r||o}).css("z-index",i)},l=function(){var t=0;return currentOptionGroup.find(i.elemOption).each(function(){this.checked&&t++}),t},u=function(){var e,n="",o=l(),r=(e=0,currentOptionGroup.find(i.elemOption).each(function(){this.checked&&(e+=parseFloat(t(this).data("sf-data").price))}),e.toFixed(2)),p=t(s).data("sf-data"),a=t(s).find(i.renderComponentSubtitle);1==o?(currentOptionGroup.find(i.elemOption).each(function(){this.checked&&(n=t(this).data("sf-data").title)}),a.html(n)):o>1?a.html(p.counterText+r):a.html(p.placeholderText)};r.updatePicture=function(e,o){var r=e.target,s=r.files[0];if(s){var p=new Image,a=new FileReader;a.onload=function(e){p.src=e.target.result;var a=t(r).closest(i.uploader),c=t('[data-sf-render="'+o+'"]');p.width=c.width(),p.height=c.height(),c.html(p),a.addClass(n),a.find(i.uploadInput).prop("value",s.name),a.find(".shop-filter__form-field").attr("data-image",p.src),shopFilterValidation()},a.readAsDataURL(s)}},r.removePicture=function(e,o){var r=t(e.target).closest(i.uploader);t('[data-sf-render="'+o+'"]').empty(),r.removeClass(n),r.find(i.uploadInput).prop("value",""),r.find(".shop-filter__form-field").attr("data-image",""),shopFilterValidation()},r.selected=function(n){var o,i;void 0===(o=n).multiple&&(o.multiple=!!t(o).closest("[data-sf-multiple]").length),(i=n).multiple?i.checked=!i.checked:(c(i).each(function(){t(this).get(0).checked=!1}),i.checked=!0),n.multiple?t(n).toggleClass(e):(c(n).removeClass(e),t(n).addClass(e))},r.pickComponent=function(t){s=t,r.selected(t)},r.pickOption=function(e){var n,c,h,f,m,g,k,v,w,y=t(e).data("sf-data");a=e,currentOptionGroup=t(e).closest(i.groupOptions),p=currentOptionGroup.data("sf-component-id"),s=t(i.elemComponent).filter('[data-sf-component-id="'+p+'"]'),r.selected(e),u(y.title),n="",c=l(),h=t(s).data("sf-data"),f=t(s).find(i.renderComponentIcon),1==c?(currentOptionGroup.find(i.elemOption).each(function(){this.checked&&(n=t(this).data("sf-data").icon)}),f.show().prop("src",n)):c>1?f.hide():f.show().prop("src",h.placeholderIcon),m=l(),g=t(s).find(i.renderComponentCounter),m>1?g.show().text(m):g.hide(),k=y.src,v=y.zIndex,(w=t("."+o).filter('[data-sf-component-id="'+p+'"]')).length<1&&!a.multiple&&t(i.renderOptionImg).append(d(k,p,v)),a.multiple?a.checked?t(i.renderOptionImg).append(d(k,p,v)):w.filter('[src="'+k+'"]').remove():w.prop("src",k)},t(document).on("click",i.elemComponent,function(){r.pickComponent(this)}),t(document).on("click",i.elemOption,function(){r.pickOption(this),shopFilterValidation()}),t(document).on("click",i.elemColor,function(){t(this).toggleClass("opened")})}}(jQuery);